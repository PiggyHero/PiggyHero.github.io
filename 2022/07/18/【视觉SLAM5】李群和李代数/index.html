<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="在学习了旋转和平移的表示方法之后，我们可以描述相机的位姿。但是在视觉SLAM中，相机的位姿是我们想要求得的，例如我们得到了一个旋转矩阵，但是该矩阵并不是最佳的结果，还需要进行优化。对一个矩阵优化是很复杂的，如三维旋转矩阵，有9个参数，这9个参数中还要满足一些条件，如旋转矩阵的行列式为1，且正交。这给优化问题带来了额外的约束，十分复杂。 因此，引入李群和李代数的知识，来使优化问题变得简单。">
<meta property="og:type" content="article">
<meta property="og:title" content="【视觉SLAM5】李群和李代数">
<meta property="og:url" content="http://example.com/2022/07/18/%E3%80%90%E8%A7%86%E8%A7%89SLAM5%E3%80%91%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0/index.html">
<meta property="og:site_name" content="PiggyHero Wiki">
<meta property="og:description" content="在学习了旋转和平移的表示方法之后，我们可以描述相机的位姿。但是在视觉SLAM中，相机的位姿是我们想要求得的，例如我们得到了一个旋转矩阵，但是该矩阵并不是最佳的结果，还需要进行优化。对一个矩阵优化是很复杂的，如三维旋转矩阵，有9个参数，这9个参数中还要满足一些条件，如旋转矩阵的行列式为1，且正交。这给优化问题带来了额外的约束，十分复杂。 因此，引入李群和李代数的知识，来使优化问题变得简单。">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/PiggyHero/pic/master/img-mac/20220718165122.png">
<meta property="og:image" content="https://raw.githubusercontent.com/PiggyHero/pic/master/img-mac/20220719092825.png">
<meta property="article:published_time" content="2022-07-18T08:33:59.000Z">
<meta property="article:modified_time" content="2022-07-24T09:29:58.599Z">
<meta property="article:author" content="PiggyHero">
<meta property="article:tag" content="SLAM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/PiggyHero/pic/master/img-mac/20220718165122.png">

<link rel="canonical" href="http://example.com/2022/07/18/%E3%80%90%E8%A7%86%E8%A7%89SLAM5%E3%80%91%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>【视觉SLAM5】李群和李代数 | PiggyHero Wiki</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/PiggyHero" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">PiggyHero Wiki</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/18/%E3%80%90%E8%A7%86%E8%A7%89SLAM5%E3%80%91%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/cutexiaoxin.gif">
      <meta itemprop="name" content="PiggyHero">
      <meta itemprop="description" content="不学习咋整啊！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PiggyHero Wiki">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【视觉SLAM5】李群和李代数
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-18 16:33:59" itemprop="dateCreated datePublished" datetime="2022-07-18T16:33:59+08:00">2022-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-24 17:29:58" itemprop="dateModified" datetime="2022-07-24T17:29:58+08:00">2022-07-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%93%E4%B8%9A%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">专业原理</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>在学习了旋转和平移的表示方法之后，我们可以描述相机的位姿。但是在视觉SLAM中，相机的位姿是我们想要求得的，例如我们得到了一个旋转矩阵，但是该矩阵并不是最佳的结果，还需要进行优化。对一个矩阵优化是很复杂的，如三维旋转矩阵，有9个参数，这9个参数中还要满足一些条件，如旋转矩阵的行列式为1，且正交。这给优化问题带来了额外的约束，十分复杂。</p>
<p>因此，引入李群和李代数的知识，来使优化问题变得简单。</p>
<span id="more"></span>
<h2 id="I-李群和李代数基础"><a href="#I-李群和李代数基础" class="headerlink" title="I. 李群和李代数基础"></a>I. 李群和李代数基础</h2><h3 id="1-群的定义"><a href="#1-群的定义" class="headerlink" title="1. 群的定义"></a>1. 群的定义</h3><p>群是一种集合加上一种运算的代数结构，我们把集合记作 $A$ ，运算记作 $·$ ，那么群可以记作 $G=(A,·)$ ，群要求这个运算满足下列条件：</p>
<p> <img src="https://raw.githubusercontent.com/PiggyHero/pic/master/img-mac/20220718165122.png" alt="image-20220718165122499" style="zoom: 50%;" /></p>
<p>这个条件看似复杂，我们可以不用管。总之，我们前面所学的<strong>旋转矩阵</strong>和<strong>变换矩阵</strong>都属于群。</p>
<ul>
<li>$SO(3)$ ：旋转矩阵群</li>
<li>$SE(3)$：欧式变换群</li>
</ul>
<p><strong>李群</strong>是指具有连续性质的群。旋转矩阵和变换矩阵群在实数空间上是连续的，所以属于李群。</p>
<h3 id="2-李代数的引出"><a href="#2-李代数的引出" class="headerlink" title="2. 李代数的引出"></a>2. 李代数的引出</h3><p>实际上，每一个李群都对应一个李代数，下面我们来看李代数是如何得到的。</p>
<p>对于任意的旋转矩阵 $R$ ，满足：</p>
<script type="math/tex; mode=display">
\boldsymbol{R} \boldsymbol{R}^{\mathrm{T}}=\boldsymbol{I} \tag{1}</script><p>$R$ 表示相机的旋转，随时间的变化，用 $R(t)$ 来表示，所以有：</p>
<script type="math/tex; mode=display">
\boldsymbol{R}(t) \boldsymbol{R}(t)^{\mathrm{T}}=\boldsymbol{I}\tag{2}</script><p>对两边同时对时间求导：</p>
<script type="math/tex; mode=display">
\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}+\boldsymbol{R}(t) \dot{\boldsymbol{R}}(t)^{\mathrm{T}}=0\tag{3}</script><p>移项得：</p>
<script type="math/tex; mode=display">
\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}=-\left(\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}\right)^{\mathrm{T}}\tag{4}</script><p>可以看到，矩阵 $\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}$ 是一个反对称矩阵，在向量进行叉积时，我们可以将其转换成反对称矩阵的形式，那么当我们有一个反对称矩阵时，也可以转换成其向量的形式与之对应，$\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}$ 是一个三维的反对称矩阵，因此我们可以找到一个三维向量 $\phi(t)$ 与之对应：</p>
<script type="math/tex; mode=display">
\dot{\boldsymbol{R}}(t) \boldsymbol{R}(t)^{\mathrm{T}}=\boldsymbol{\phi}(t)^{\wedge}\tag{5}</script><p>现在我们在等式两边右乘 $R(t)$ ，有：</p>
<script type="math/tex; mode=display">
\dot{\boldsymbol{R}}(t)=\phi(t)^{\wedge} \boldsymbol{R}(t)=\left[\begin{array}{ccc}
0 & -\phi_{3} & \phi_{2} \\
\phi_{3} & 0 & -\phi_{1} \\
-\phi_{2} & \phi_{1} & 0
\end{array}\right] \boldsymbol{R}(t)\tag{6}</script><p>可以看到，<strong>对 $R(t)$ 每求一次导，就相当于在其左边乘上一个 $\phi(t)^{\wedge}$ 即可。</strong> </p>
<p>我们再假设在 $t_0$ 附近，$\phi(t_0) = \phi_0$ 是一个常数，则根据式（6）有：</p>
<script type="math/tex; mode=display">
\dot{\boldsymbol{R}}(t)=\boldsymbol{\phi}\left(t_{0}\right)^{\wedge} \boldsymbol{R}(t)=\boldsymbol{\phi}_{0}^{\wedge} \boldsymbol{R}(t)\tag{7}</script><p>这是一个关于 $R(t)$ 的微分方程，且初始值为 $R(0)=I$ ，解得：</p>
<script type="math/tex; mode=display">
\boldsymbol{R}(t)=\exp \left(\phi_{0}^{\wedge} t\right)\tag{8}</script><p><strong>这说明在 $t=0$ 附近，旋转矩阵可以由 $\exp \left(\phi_{0}^{\wedge} t\right)$ 计算出来。</strong></p>
<blockquote>
<p>这个结论也适用于 $t\neq0$ 的其他任何情况，当 $R(t_0)\neq I$ 时，$R(t)=R(t_0)\exp(\phi_0^{\wedge}t)$ </p>
</blockquote>
<p>现在假设在 $t_0 = 0$ 时，旋转矩阵 $R(t_0)=I$ ，按照导数的定义，可以把 $R(t)$ 在 $t=0$ 附近进行一阶泰勒展开：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\boldsymbol{R}(t) & \approx \boldsymbol{R}\left(t_{0}\right)+\dot{\boldsymbol{R}}\left(t_{0}\right)\left(t-t_{0}\right) \\
&=\boldsymbol{I}+\boldsymbol{\phi}\left(t_{0}\right)^{\wedge}\boldsymbol{R}(t_0)(t-t_0)\\
&=\boldsymbol{I}+\boldsymbol{\phi}\left(t_{0}\right)^{\wedge}(t)
\end{aligned}\tag{9}</script><p>这里可以看到 $\phi$ 反映了 $R$ 的导数性质，固称它为在 $SO(3)$ <strong>原点附近</strong>的正切空间。</p>
<p>通过上面的推导，我们可以知道：</p>
<ul>
<li>给定某时刻的 $R$ ，我们就可以求得一个 $\phi$ ，它描述了 $R$ 在局部的导数性质。这里的 $\phi$ 正是对应到 $SO(3)$ 上的李代数 $\mathfrak{s o}(3)$ 。</li>
<li>我们可以通过指数/对数映射来完成李群和李代数之间的转化。</li>
</ul>
<h3 id="3-李代数的定义"><a href="#3-李代数的定义" class="headerlink" title="3. 李代数的定义"></a>3. 李代数的定义</h3><p>每个李群都有与之对应的李代数，李代数描述了李群的局部性质。李代数的定义也十分抽象，李代数由一个集合 $\mathbb{V}$ ，一个数域 $\mathbb{F}$ 和一个二元运算[ ，]组成，满足以下性质：</p>
<p><img src="https://raw.githubusercontent.com/PiggyHero/pic/master/img-mac/20220719092825.png" alt="image-20220719092825479" style="zoom:50%;" /></p>
<p>则 $(\mathbb{V},\mathbb{F},[,])$ 为一个李代数，记为 $\mathfrak{g}$。</p>
<p>同样看似复杂的性质我们先不用管，我们只需知道，三维向量的叉积是一种李括号，因此 $\mathfrak{g}=(\mathbb{R}^3,\mathbb{R},\times)$ 构成了一个李代数。</p>
<h4 id="1-李代数-mathfrak-so-3"><a href="#1-李代数-mathfrak-so-3" class="headerlink" title="(1)李代数 $\mathfrak{so(3)}$"></a>(1)李代数 $\mathfrak{so(3)}$</h4><p>$SO(3)$ 对应的李代数是定义在 $\mathbb{R}^3$ 上的向量，记为 $\phi$ ，每一个 $\phi$ 对应着一个反对称矩阵：</p>
<script type="math/tex; mode=display">
\boldsymbol{\Phi}=\phi^{\wedge}=\left[\begin{array}{ccc}
0 & -\phi_{3} & \phi_{2} \\
\phi_{3} & 0 & -\phi_{1} \\
-\phi_{2} & \phi_{1} & 0
\end{array}\right] \in \mathbb{R}^{3 \times 3}</script><p>在此定义下，两个向量 $\phi_1$ ，$\phi_2$ 的李括号定义为：</p>
<script type="math/tex; mode=display">
\left[\phi_{1}, \phi_{2}\right]=\left(\Phi_{1} \Phi_{2}-\Phi_{2} \Phi_{1}\right)^{\vee}</script><blockquote>
<p>由于向量 $\phi$ 和反对称矩阵是一一对应的，我们可以认为李代数 $\mathfrak{so(3)}$ 的元素是三维向量或者是三维反对称矩阵。</p>
<script type="math/tex; mode=display">
\mathfrak{s o}(3)=\left\{\phi \in \mathbb{R}^{3}, \Phi=\phi^{\wedge} \in \mathbb{R}^{3 \times 3}\right\}</script></blockquote>
<p>它与 $SO(3)$ 的关系可以有指数映射给定：</p>
<script type="math/tex; mode=display">
\boldsymbol{R}=\exp \left(\phi^{\wedge}\right)</script><h4 id="2-李代数-mathfrak-se-3"><a href="#2-李代数-mathfrak-se-3" class="headerlink" title="(2) 李代数 $\mathfrak{se(3)}$"></a>(2) 李代数 $\mathfrak{se(3)}$</h4><p>对于 $SE(3)$ ，也有对应的李代数 $\mathfrak{se(3)}$ 。它位于 $\mathbb{R}^6$ 空间中：</p>
<script type="math/tex; mode=display">
\mathfrak{s e}(3)=\left\{\boldsymbol{\xi}=\left[\begin{array}{c}
\rho \\
\phi
\end{array}\right] \in \mathbb{R}^{6}, \rho \in \mathbb{R}^{3}, \phi \in \mathfrak{s o}(3), \xi^{\wedge}=\left[\begin{array}{cc}
\phi^{\wedge} & \rho \\
\mathbf{0}^{\mathrm{T}} & 0
\end{array}\right] \in \mathbb{R}^{4 \times 4}\right\}</script><p>我们把每个 $\mathfrak{se(3)}$ 的元素记为 $\boldsymbol{\xi}$ ，它是一个6维向量，前三维表示平移（但含义和变换矩阵中的平移不同），记为 $\rho$  。后三维为旋转，记为 $\phi$ ，实质上是 $\mathfrak{so(3)}$ 中的元素。</p>
<p>还有我们要拓展符号 <code>^</code> 的含义，之前三维的时候表示一个向量对应的反对称矩阵，这里我们还是保留这种概念，但此处不是反对称矩阵，而是表示：</p>
<script type="math/tex; mode=display">
\boldsymbol{\xi}^{\wedge}=\left[\begin{array}{ll}
\phi^{\wedge} & \rho \\
\mathbf{0}^{\mathrm{T}} & 0
\end{array}\right] \in \mathbb{R}^{4 \times 4}</script><p>但是它们依然是一一对应的关系。此时的李括号的定义和 $\mathfrak{so(3)}$ 的类似，为：</p>
<script type="math/tex; mode=display">
\left[\boldsymbol{\xi}_{1}, \boldsymbol{\xi}_{2}\right]=\left(\boldsymbol{\xi}_{1}^{\wedge} \boldsymbol{\xi}_{2}^{\wedge}-\boldsymbol{\xi}_{2}^{\wedge} \boldsymbol{\xi}_{1}^{\wedge}\right)^{\vee}</script><h2 id="II-指数映射和对数映射"><a href="#II-指数映射和对数映射" class="headerlink" title="II. 指数映射和对数映射"></a>II. 指数映射和对数映射</h2><h3 id="1-SO-3-上的指数映射和对数映射"><a href="#1-SO-3-上的指数映射和对数映射" class="headerlink" title="1. $SO(3)$ 上的指数映射和对数映射"></a>1. $SO(3)$ 上的指数映射和对数映射</h3><p>由李代数到李群，为指数映射；由李群到李代数，为对数映射。</p>
<h4 id="1-指数映射"><a href="#1-指数映射" class="headerlink" title="(1) 指数映射"></a>(1) 指数映射</h4><p>我们如何来求 $\exp \left(\phi^{\wedge}\right)$ 呢？</p>
<p>任意矩阵的指数映射可以写成一个泰勒展开，但只有在收敛的情况下才会有结果，结果仍为一个矩阵：</p>
<script type="math/tex; mode=display">
\exp (\boldsymbol{A})=\sum_{n=0}^{\infty} \frac{1}{n !} A^{n}</script><p>因此，对于 $\exp \left(\phi^{\wedge}\right)$ ，有：</p>
<script type="math/tex; mode=display">
\exp \left(\boldsymbol{\phi}^{\wedge}\right)=\sum_{n=0}^{\infty} \frac{1}{n !}\left(\phi^{\wedge}\right)^{n}</script><p>尽管我们有了这个公式，理论上可以求出来，但是这里面有无穷次幂，是很难计算的。因此我们寻求其他方式来计算。我们用模长和方向向量来表示每一个 $\boldsymbol{\phi}$ ，即 $\boldsymbol{\phi}=\theta\boldsymbol{a}$ 。这里的 $\boldsymbol {a}$ 是一个长度为1 的单位向量。对于 $\boldsymbol{a}^{\wedge}$ 有如下性质：</p>
<script type="math/tex; mode=display">
\boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}=\left[\begin{array}{ccc}
-a_{2}^{2}-a_{3}^{2} & a_{1} a_{2} & a_{1} a_{3} \\
a_{1} a_{2} & -a_{1}^{2}-a_{3}^{2} & a_{2} a_{3} \\
a_{1} a_{3} & a_{2} a_{3} & -a_{1}^{2}-a_{2}^{2}
\end{array}\right]=\boldsymbol{aa ^ { \mathrm { T } } - \boldsymbol { I }}</script><p>以及：</p>
<script type="math/tex; mode=display">
\boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}=\boldsymbol{a}^{\wedge}\left(\boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}-\boldsymbol{I}\right)=-\boldsymbol{a}^{\wedge}</script><p>这两个式子提供了处理  $\boldsymbol{a}^{\wedge}$ 高阶项的方法，因此我们可以把指数映射 $\exp \left(\boldsymbol{\phi}^{\wedge}\right)$ 写成：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\exp \left(\boldsymbol{\phi}^{\wedge}\right)=\exp \left(\theta \boldsymbol{a}^{\wedge}\right)=\sum_{n=0}^{\infty} \frac{1}{n !}\left(\theta \boldsymbol{a}^{\wedge}\right)^{n}

&=\boldsymbol{I}+\theta \boldsymbol{a}^{\wedge}+\frac{1}{2 !} \theta^{2} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}+\frac{1}{3 !} \theta^{3} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}+\frac{1}{4 !} \theta^{4}\left(\boldsymbol{a}^{\wedge}\right)^{4}+\cdots \\
&=\boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}-\boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}+\theta \boldsymbol{a}^{\wedge}+\frac{1}{2 !} \theta^{2} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}-\frac{1}{3 !} \theta^{3} \boldsymbol{a}^{\wedge}-\frac{1}{4 !} \theta^{4}\left(\boldsymbol{a}^{\wedge}\right)^{2}+\cdots \\
&=\boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}+\underbrace{\left(\theta-\frac{1}{3 !} \theta^{3}+\frac{1}{5 !} \theta^{5}-\cdots\right)}_{\sin \theta} \boldsymbol{a}^{\wedge}-\underbrace{\left(1-\frac{1}{2 !} \theta^{2}+\frac{1}{4 !} \theta^{4}-\cdots\right)}_{\cos \theta} \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge} \\
&=\boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}+\boldsymbol{I}+\sin \theta \boldsymbol{a}^{\wedge}-\cos \theta \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge} \\
&=(1-\cos \theta) \boldsymbol{a}^{\wedge} \boldsymbol{a}^{\wedge}+\boldsymbol{I}+\sin \theta \boldsymbol{a}^{\wedge} \\
&=\cos \theta \boldsymbol{I}+(1-\cos \theta) \boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}+\sin \theta \boldsymbol{a}^{\wedge} .
\end{aligned}</script><p>即：</p>
<script type="math/tex; mode=display">
\exp \left(\theta \boldsymbol{a}^{\wedge}\right)=\cos \theta \boldsymbol{I}+(1-\cos \theta) \boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}+\sin \theta \boldsymbol{a}^{\wedge}</script><p>这个式子我们似曾相识，这就是在刚体运动描述中旋转向量转化成旋转矩阵的<strong>罗德里格斯</strong>公式。所以我们现在可以明白，其实李代数 $\mathfrak{so(3)}$ 实际上就是由所谓的<strong>旋转向量</strong>组成的向量空间，而<strong>指数映射即罗德里格斯公式</strong>。我们可以通过该公式把 $\mathfrak{so(3)}$ 中的任意一个向量对应到一个位于 $SO(3)$ 中的旋转矩阵。</p>
<h4 id="2-对数映射"><a href="#2-对数映射" class="headerlink" title="(2) 对数映射"></a>(2) 对数映射</h4><p>反之，通过定义对数映射，即可把 $SO(3)$ 中的元素对应到 $\mathfrak{so(3)}$ 中：</p>
<script type="math/tex; mode=display">
\phi=\ln (\boldsymbol{R})^{\vee}=\left(\sum_{n=0}^{\infty} \frac{(-1)^{n}}{n+1}(\boldsymbol{R}-\boldsymbol{I})^{n+1}\right)^{\vee}</script><p>但实际上，我们没有必要再通过计算该式来求旋转向量了，我们可以根据：</p>
<script type="math/tex; mode=display">
\begin{aligned}\operatorname{tr}(\boldsymbol{R}) &=\cos \theta \operatorname{tr}(\boldsymbol{I})+(1-\cos \theta) \operatorname{tr}\left(\boldsymbol{n} \boldsymbol{n}^{\mathrm{T}}\right)+\sin \theta \operatorname{tr}\left(\boldsymbol{n}^{\wedge}\right) \\&=3 \cos \theta+(1-\cos \theta) \\&=1+2 \cos \theta\end{aligned}</script><script type="math/tex; mode=display">
\theta=\arccos \frac{\operatorname{tr}(\boldsymbol{R})-1}{2}</script><p>然后根据旋转轴旋转后不变的性质，可以求出旋转轴上的单位向量：</p>
<script type="math/tex; mode=display">
R \boldsymbol n=\boldsymbol n</script><p>这两个式子，利用迹的性质来求得旋转向量。</p>
<p><strong>注意：</strong></p>
<p><strong>关于指数映射有什么性质呢？是否对于任意的 $R$ 都能找到唯一的 $\phi$ 与之对应呢？</strong></p>
<p>事实上，指数映射只是一个满射，并不是单射，即每一个旋转矩阵 $R$ 都可以找到一个旋转向量与之对应，但是可能存在多个旋转向量对应着同一个旋转矩阵（例如一个旋转向量，旋转角度是30°和30°+360°）。但是如果我们把旋转角度固定在$\pm\pi$ 中时，此时的李群和李代数是一一对应的。</p>
<p>根据指数映射，我们知道旋转矩阵和旋转向量的关系就是一对李群和李代数的关系。<strong>因此旋转矩阵的导数可以由旋转向量指定，指导着如何在旋转矩阵中进行微积分运算。</strong></p>
<h3 id="2-SE-3-上的指数映射和对数映射"><a href="#2-SE-3-上的指数映射和对数映射" class="headerlink" title="2. $SE(3)$ 上的指数映射和对数映射"></a>2. $SE(3)$ 上的指数映射和对数映射</h3><h4 id="1-指数映射-1"><a href="#1-指数映射-1" class="headerlink" title="(1) 指数映射"></a>(1) 指数映射</h4><p>$\mathfrak{se(3)}$ 上的指数映射形式如下：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\exp \left(\boldsymbol{\xi}^{\wedge}\right) &=\left[\begin{array}{cc}
\sum_{n=0}^{\infty} \frac{1}{n !}\left(\phi^{\wedge}\right)^{n} & \sum_{n=0}^{\infty} \frac{1}{(n+1) !}\left(\phi^{\wedge}\right)^{n} \boldsymbol{\rho} \\
\mathbf{0}^{\mathrm{T}}
\end{array}\right] \\
& \triangleq\left[\begin{array}{cc}
\boldsymbol{R} & \boldsymbol{J} \boldsymbol{\rho} \\
\mathbf{0}^{\mathrm{T}} & 1
\end{array}\right]=\boldsymbol{T} 
\end{aligned}</script><p>这里定义：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\sum_{n=0}^{\infty} \frac{1}{(n+1) !}\left(\phi^{\wedge}\right)^{n} &=\boldsymbol{I}+\frac{1}{2 !} \theta \boldsymbol{a}^{\wedge}+\frac{1}{3 !} \theta^{2}\left(\boldsymbol{a}^{\wedge}\right)^{2}+\frac{1}{4 !} \theta^{3}\left(\boldsymbol{a}^{\wedge}\right)^{3}+\frac{1}{5 !} \theta^{4}\left(\boldsymbol{a}^{\wedge}\right)^{4} \cdots \\
&=\frac{1}{\theta}\left(\frac{1}{2 !} \theta^{2}-\frac{1}{4 !} \theta^{4}+\cdots\right)\left(\boldsymbol{a}^{\wedge}\right)+\frac{1}{\theta}\left(\frac{1}{3 !} \theta^{3}-\frac{1}{5} \theta^{5}+\cdots\right)\left(\boldsymbol{a}^{\wedge}\right)^{2}+\boldsymbol{I} \\
&=\frac{1}{\theta}(1-\cos \theta)\left(\boldsymbol{a}^{\wedge}\right)+\frac{\theta-\sin \theta}{\theta}\left(\boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}-\boldsymbol{I}\right)+\boldsymbol{I} \\
&=\frac{\sin \theta}{\theta} \boldsymbol{I}+\left(1-\frac{\sin \theta}{\theta}\right) \boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}+\frac{1-\cos \theta}{\theta} \boldsymbol{a}^{\wedge} \stackrel{\text { def }}{=} \boldsymbol{J}
\end{aligned}</script><p>可以从结果上看出，$\boldsymbol{\xi}$ 的指数映射左上角的 $\boldsymbol{R}$ 是我们熟知的 $SO(3)$ 中的元素，而右上角的平移部分，发生了一次以 $\boldsymbol{J}$ </p>
<p>为系数的线性变换。</p>
<h4 id="2-对数映射-1"><a href="#2-对数映射-1" class="headerlink" title="(2) 对数映射"></a>(2) 对数映射</h4><p>对于对数映射，在已知 $\boldsymbol T$ 后，我们可以知道其右上角的表示平移的向量：</p>
<script type="math/tex; mode=display">
t=J \rho</script><p>而这个 $\boldsymbol{J}$ 是和 $\phi$ 有关。因此可以先根据左上角的旋转矩阵 $\boldsymbol R$ 先求出 $\phi$ ，再求出  $\boldsymbol{J}$ ，最后求解方程得到 $\rho$ 。</p>
<h2 id="III-李代数求导与扰动模型"><a href="#III-李代数求导与扰动模型" class="headerlink" title="III. 李代数求导与扰动模型"></a>III. 李代数求导与扰动模型</h2><h3 id="1-BCH公式与近似形式"><a href="#1-BCH公式与近似形式" class="headerlink" title="1. BCH公式与近似形式"></a>1. BCH公式与近似形式</h3><p>我们学习李代数的动机就是在优化矩阵的时候，可以方便的求出矩阵的导数。</p>
<p>我们已经知道在 $SO(3)$ 和 $SE(3)$ 上李群和李代数的关系，但是还有一件事没有明确，例如在 $SO(3)$ 中完成两个矩阵的乘法时，所对应的李代数在 $\mathfrak{so(3)}$ 上发生了什么改变呢？是否有如下式子成立：</p>
<script type="math/tex; mode=display">
\exp \left(\phi_{1}^{\wedge}\right) \exp \left(\phi_{2}^{\wedge}\right)=\exp \left(\left(\phi_{1}+\phi_{2}\right)^{\wedge}\right) ?</script><p>或：</p>
<script type="math/tex; mode=display">
\ln (\exp (\boldsymbol{A}) \exp (\boldsymbol{B}))=\boldsymbol{A}+\boldsymbol{B} ?</script><p>如果 $\phi$ 是标量，这是成立的。但 $\boldsymbol\phi$ 表示一个向量时，是不成立的。</p>
<p>根据 <strong><em>baker-Campbell-Hausdorff</em></strong> 公式，矩阵的指数函数与矩阵的指数函数相乘：</p>
<script type="math/tex; mode=display">
\ln (\exp (\boldsymbol{A}) \exp (\boldsymbol{B}))=\boldsymbol{A}+\boldsymbol{B}+\frac{1}{2}[\boldsymbol{A}, \boldsymbol{B}]+\frac{1}{12}[\boldsymbol{A},[\boldsymbol{A}, \boldsymbol{B}]]-\frac{1}{12}[\boldsymbol{B},[\boldsymbol{A}, \boldsymbol{B}]]+\cdots</script><p>其中[]表示李括号。该公式告诉我们，当求两个矩阵指数函数之积时，<strong>会产生一些李括号组成的余项</strong>。</p>
<p>现在我们考虑在 $SO(3)$ 上的李代数 $\ln \left(\exp \left(\phi_{1}^{\wedge}\right) \exp \left(\phi_{2}^{\wedge}\right)\right)^{\vee}$ ，当 $\phi_1$ 和 $\phi_2$ 为小量时，小量二次以上的项都可以忽略，此时 <strong>BCH</strong> 公式拥有线性近似表达：</p>
<script type="math/tex; mode=display">
\ln \left(\exp \left(\phi_{1}^{\wedge}\right) \exp \left(\phi_{2}^{\wedge}\right)\right)^{\vee} \approx \begin{cases}J_{l}\left(\phi_{2}\right)^{-1} \phi_{1}+\phi_{2} & \text { 当 } \phi_{1} \text { 为小量, } \\ J_{r}\left(\phi_{1}\right)^{-1} \phi_{2}+\phi_{1} & \text { 当 } \phi_{2} \text { 为小量. }\end{cases}</script><p>该式说明了：</p>
<ul>
<li>当对一个旋转矩阵 $R_2$ （李代数为 $\phi_2$ ）左乘一个微小旋转矩阵 $R_1$ （李代数为 $\phi_1$ ）时，可以近似看作，在原有的李代数 $\phi_2$ 上加上了一项 $\boldsymbol J_l(\phi_2)^{-1}\phi_1$ 。</li>
<li>当对一个旋转矩阵 $R_1$ （李代数为 $\phi_1$ ）右乘一个微小旋转矩阵 $R_2$ （李代数为 $\phi_2$ ）时，可以近似看作，在原有的李代数 $\phi_1$ 上加上了一项 $\boldsymbol J_r(\phi_1)^{-1}\phi_2$ 。</li>
</ul>
<p>于是李代数在<strong>BCH</strong>近似下，分成了左乘和右乘近似两种，所以我们要注意是左乘模型还是右乘模型。</p>
<p>左乘近似雅可比矩阵为：</p>
<script type="math/tex; mode=display">
\boldsymbol{J}_{l}=\boldsymbol{J}=\frac{\sin \theta}{\theta} \boldsymbol{I}+\left(1-\frac{\sin \theta}{\theta}\right) \boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}+\frac{1-\cos \theta}{\theta} \boldsymbol{a}^{\wedge}</script><p>它的逆为：</p>
<script type="math/tex; mode=display">
\boldsymbol{J}_{l}^{-1}=\frac{\theta}{2} \cot \frac{\theta}{2} \boldsymbol{I}+\left(1-\frac{\theta}{2} \cot \frac{\theta}{2}\right) \boldsymbol{a} \boldsymbol{a}^{\mathrm{T}}-\frac{\theta}{2} \boldsymbol{a}^{\wedge}</script><p>而右乘雅可比矩阵为：</p>
<script type="math/tex; mode=display">
\boldsymbol{J}_{r}(\boldsymbol{\phi})=\boldsymbol{J}_{l}(-\boldsymbol{\phi})</script><p><strong>这样，我们就可以谈论李群乘法与李代数假发的关系了。</strong></p>
<p>我们重新叙述一下 BCH 的意义：</p>
<p>假设某个旋转 $R$ ，对应的李代数为 $\phi$ ，我们给它左乘一个微笑的旋转，记为 $\Delta R$ ，对应的李代数为 $\Delta \phi$ ，那么在李群上得到的结果就是 $\Delta R ·R$ ，而在李代数上，根据 BCH公式，为$J_{l}^{-1}(\phi) \Delta \phi+\phi$ 。可以写成：</p>
<script type="math/tex; mode=display">
\exp \left(\Delta \phi^{\wedge}\right) \exp \left(\phi^{\wedge}\right)=\exp \left(\left(\phi+J_{l}^{-1}(\phi) \Delta \phi\right)^{\wedge}\right)</script><p>反之，我们在李代数进行加法，让 $\phi$ 加上 $\Delta \phi$ ，那么可以近似为李群上带左右雅可比的乘法：</p>
<script type="math/tex; mode=display">
\exp \left((\boldsymbol{\phi}+\Delta \boldsymbol{\phi})^{\wedge}\right)=\exp \left(\left(\boldsymbol{J}_{l} \Delta \boldsymbol{\phi}\right)^{\wedge}\right) \exp \left(\boldsymbol{\phi}^{\wedge}\right)=\exp \left(\boldsymbol{\phi}^{\wedge}\right) \exp \left(\left(\boldsymbol{J}_{r} \Delta \boldsymbol{\phi}\right)^{\wedge}\right)</script><p>同样，对于 $SE(3)$ 来说，也有类似的BCH公式：</p>
<script type="math/tex; mode=display">
\begin{aligned}
&\exp \left(\Delta \boldsymbol{\xi}^{\wedge}\right) \exp \left(\boldsymbol{\xi}^{\wedge}\right) \approx \exp \left(\left(\mathcal{J}_{l}^{-1} \Delta \boldsymbol{\xi}+\boldsymbol{\xi}\right)^{\wedge}\right) \\
&\exp \left(\boldsymbol{\xi}^{\wedge}\right) \exp \left(\Delta \boldsymbol{\xi}^{\wedge}\right) \approx \exp \left(\left(\mathcal{J}_{r}^{-1} \Delta \boldsymbol{\xi}+\boldsymbol{\xi}\right)^{\wedge}\right)
\end{aligned}</script><p>这里 $\mathcal{J}_{l}$ 稍微复杂，是一个 6维方阵。</p>
<h3 id="2-SO-3-上的李代数求导"><a href="#2-SO-3-上的李代数求导" class="headerlink" title="2. $SO(3)$ 上的李代数求导"></a>2. $SO(3)$ 上的李代数求导</h3><p>下面来讨论一个带有李代数的函数，以及关于该李代数函数求导的问题。这个问题有很强的实际背景，就是在SLAM中，我们要估计相机的位姿，而位姿通常是由 $SO(3)$ 和 $SE(3)$ 中的矩阵来描述的。</p>
<p>假设世界坐标系下一点的坐标为 $\boldsymbol p$ ，产生了一个观测数据 $\boldsymbol z$ ，由坐标变换关系可知：</p>
<script type="math/tex; mode=display">
\boldsymbol z=\boldsymbol{T} \boldsymbol p+\boldsymbol w</script><p>这里的 $\boldsymbol w$ 为随机噪声。因为它的存在，我们的观测值一定是不准确的，所以我们想要计算理想的观测与实际观测值的误差为：</p>
<script type="math/tex; mode=display">
\boldsymbol e=\boldsymbol z-\boldsymbol{T} \boldsymbol{p}</script><p>假设有N个这样的路标点和观测，我们要考虑这N个点的误差，让它们的误差和最小，从而得到一个最优的 $T$ ，则：</p>
<script type="math/tex; mode=display">
\min _{\boldsymbol{T}} J(\boldsymbol{T})=\sum_{i=1}^{N}\left\|\boldsymbol{z}_{i}-\boldsymbol{T}{\boldsymbol{p}_i}\right\|_{2}^{2}</script><p>这里的 $J(T)$ 就是一个关于李群或李代数的函数。我们要计算它的最小值，就要使目标函数 $J$ 关于变换矩阵 $T$ 进行求导。在SLAM中，我们会经常构建与位姿相关的函数，然后求其导数。</p>
<p>然而，在 $SO(3)$ 和 $SE(3)$ 中，并没有良好定义的加法，它们只是群。而从李代数的角度来说，由于李代数由向量组成，具有良好的加法运算，因此使用李代数解决求导问题的思路分为两种：</p>
<ul>
<li>用李代数表示位姿，然后根据李代数加法对李代数求导</li>
<li>对李群左乘或右乘微小扰动，然后对该扰动进行求导，称为左扰动和右扰动模型。</li>
</ul>
<h4 id="1-李代数求导"><a href="#1-李代数求导" class="headerlink" title="(1) 李代数求导"></a>(1) 李代数求导</h4><p>首先考虑 $SO(3)$ 上，假设我们对一个空间点 $\boldsymbol p$ 进行了旋转，得到了 $R\boldsymbol p$ 。现在要计算旋转后点的坐标相对于旋转的导数，我们非正式地记为：</p>
<script type="math/tex; mode=display">
\frac{\partial(\boldsymbol{R} \boldsymbol{p})}{\partial \boldsymbol{R}}</script><blockquote>
<p>这里不能按照矩阵微分来定义导数，只是一个记号</p>
</blockquote>
<p>由于 $SO(3)$ 没有加法，所以该导数无法按照导数的定义进行计算，设矩阵 $R$ 对应的李代数为 $\phi$ ，我们转而计算：</p>
<script type="math/tex; mode=display">
\frac{\partial\left(\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}\right)}{\partial \boldsymbol{\phi}}</script><p>按照导数的定义，有</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial\left(\exp \left(\phi^{\wedge}\right) \boldsymbol{p}\right)}{\partial \boldsymbol{\phi}} &=\lim _{\delta \boldsymbol{\phi} \rightarrow \mathbf{0}} \frac{\exp \left((\boldsymbol{\phi}+\delta \boldsymbol{\phi})^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\phi}} \\
&=\lim _{\delta \boldsymbol{\phi} \rightarrow \mathbf{0}} \frac{\exp \left(\left(\boldsymbol{J}_{l} \delta \boldsymbol{\phi}\right)^{\wedge}\right) \exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\phi}} \\
&=\lim _{\delta \boldsymbol{\phi} \rightarrow \mathbf{0}} \frac{\left(\boldsymbol{I}+\left(\boldsymbol{J}_{l} \delta \boldsymbol{\phi}\right)^{\wedge}\right) \exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\phi}} \\
&=\lim _{\delta \boldsymbol{\phi} \rightarrow \mathbf{0}} \frac{\left(\boldsymbol{J}_{l} \delta \boldsymbol{\phi}\right)^{\wedge} \exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\phi}} \\
&=\lim _{\delta \boldsymbol{\phi} \rightarrow \mathbf{0}} \frac{-\left(\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}\right)^{\wedge} \boldsymbol{J}_{l} \delta \boldsymbol{\phi}}{\delta \boldsymbol{\phi}}=-(\boldsymbol{R} \boldsymbol{p})^{\wedge} \boldsymbol{J}_{l}
\end{aligned}</script><p>于是我们推出了旋转后的点相对于李代数的导数为：</p>
<script type="math/tex; mode=display">
\frac{\partial(\boldsymbol{R} \boldsymbol{p})}{\partial \boldsymbol{\phi}}=(-\boldsymbol{R} \boldsymbol{p})^{\wedge} \boldsymbol{J}_{l}</script><p>这里仍包含形式复杂的 $\boldsymbol J_l$ ，可以通过先求出 $\phi$ 再求出它。但是我们不太希望计算它，接下来我们会看到扰动模型提供了简单的导数计算方式。</p>
<h4 id="2-扰动模型（左乘）"><a href="#2-扰动模型（左乘）" class="headerlink" title="(2) 扰动模型（左乘）"></a>(2) 扰动模型（左乘）</h4><p>另一种求导方式是对 $R$ 进行一次扰动 $\Delta R$ ，这个扰动可以乘在左边也可以在右边，最后的结果会有一点微小的差异，设左扰动 $\Delta R$ 对应的李代数为 $\boldsymbol\varphi$ ，然后对 $\boldsymbol\varphi$ 求导，即：</p>
<script type="math/tex; mode=display">
\frac{\partial(\boldsymbol{R} \boldsymbol{p})}{\partial \varphi}=\lim _{\boldsymbol{\varphi} \rightarrow \mathbf{0}} \frac{\exp \left(\boldsymbol{\varphi}^{\wedge}\right) \exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\boldsymbol{\varphi}}</script><p>计算：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial(\boldsymbol{R} \boldsymbol{p})}{\partial \boldsymbol{\varphi}} &=\lim _{\boldsymbol{\varphi} \rightarrow 0} \frac{\exp \left(\boldsymbol{\varphi}^{\wedge}\right) \exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\phi}^{\wedge}\right) \boldsymbol{p}}{\boldsymbol{\varphi}} \\
&=\lim _{\varphi \rightarrow 0} \frac{\left(\boldsymbol{I}+\boldsymbol{\varphi}^{\wedge}\right) \exp \left(\phi^{\wedge}\right) \boldsymbol{p}-\exp \left(\phi^{\wedge}\right) \boldsymbol{p}}{\boldsymbol{\varphi}} \\
&=\lim _{\boldsymbol{\varphi} \rightarrow 0} \frac{\boldsymbol{\varphi}^{\wedge} \boldsymbol{R} \boldsymbol{p}}{\boldsymbol{\varphi}}=\lim _{\boldsymbol{\varphi} \rightarrow \mathbf{0}} \frac{-(\boldsymbol{R} \boldsymbol{p})^{\wedge} \boldsymbol{\varphi}}{\boldsymbol{\varphi}}=-(\boldsymbol{R} \boldsymbol{p})^{\wedge}
\end{aligned}</script><p>该方法的结果省去了一个雅可比矩阵 $J_l$ 。</p>
<h3 id="3-SE-3-上的李代数求导"><a href="#3-SE-3-上的李代数求导" class="headerlink" title="3. $SE(3)$ 上的李代数求导"></a>3. $SE(3)$ 上的李代数求导</h3><p>李代数求导就不介绍了，直接介绍扰动模型。</p>
<p>$\Delta T = \exp(\delta\boldsymbol{\xi}^{\wedge})$ ，我们设扰动项的李代数为$\delta \boldsymbol{\xi}=[\delta \boldsymbol{\rho}, \delta \boldsymbol{\phi}]^{\mathrm{T}}$ ，则：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial(\boldsymbol{T} \boldsymbol{p})}{\partial \delta \boldsymbol{\xi}}&=\lim _{\delta \boldsymbol{\xi} \rightarrow 0} \frac{\exp \left(\delta \boldsymbol{\xi}^{\wedge}\right) \exp \left(\boldsymbol{\xi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\xi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\xi}}\\

&=\lim _{\delta \xi \rightarrow 0} \frac{\left(\boldsymbol{I}+\delta \boldsymbol{\xi}^{\wedge}\right) \exp \left(\boldsymbol{\xi}^{\wedge}\right) \boldsymbol{p}-\exp \left(\boldsymbol{\xi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\xi}} \\
&=\lim _{\delta \boldsymbol{\xi} \rightarrow 0} \frac{\delta \boldsymbol{\xi}^{\wedge} \exp \left(\boldsymbol{\xi}^{\wedge}\right) \boldsymbol{p}}{\delta \boldsymbol{\xi}} \\
&=\lim _{\delta \boldsymbol{\xi} \rightarrow 0} \frac{\left[\begin{array}{cc}
\delta \boldsymbol{\phi}^{\wedge} & \delta \boldsymbol{\rho} \\
\mathbf{0}^{\mathrm{T}} & 0
\end{array}\right]\left[\begin{array}{c}
\boldsymbol{R} \boldsymbol{p}+\boldsymbol{t} \\
1
\end{array}\right]}{\delta \boldsymbol{\xi}} \\
&=\lim _{\delta \boldsymbol{\xi} \rightarrow 0} \frac{\left[\begin{array}{c}
\delta \boldsymbol{\phi}^{\wedge}(\boldsymbol{R} \boldsymbol{p}+\boldsymbol{t})+\delta \boldsymbol{\rho} \\
\mathbf{0}^{\mathrm{T}}
\end{array}\right]}{[\delta \boldsymbol{\rho}, \delta \boldsymbol{\phi}]^{\mathrm{T}}}=\left[\begin{array}{cc}
\boldsymbol{I} & -(\boldsymbol{R} \boldsymbol{p}+\boldsymbol{t})^{\wedge} \\
\mathbf{0}^{\mathrm{T}} & \mathbf{0}^{\mathrm{T}}
\end{array}\right] \stackrel{\text { def }}{=}(\boldsymbol{T} \boldsymbol{p})^{\odot}
\end{aligned}</script><p>这个形式很复杂，但只要记住最后的结论就是该扰动模型的结果是一个矩阵，这个矩阵是 $4\times 6$ 维的。</p>
<h2 id="IV-总结"><a href="#IV-总结" class="headerlink" title="IV. 总结"></a>IV. 总结</h2><p>前面讲了李群李代数的由来，现在进行简单的总结，该总结仅建立在个人理解上，并没有证明过程。</p>
<ol>
<li>李群和李代数的引入是为了解决矩阵求导问题。因为求导需要进行加减，而旋转矩阵的加法运算不封闭，所以要借助李代数来进行。对李群求导，可以转化为对其对应的李代数求导。对于求导过程中，增量的表示可以用扰动模型表示或是利用李代数的加法运算来表示。</li>
<li><strong>李群和李代数的引入的一个重大原因就是简化了矩阵相乘的运算</strong>。根据BCH近似公式，两个李群相乘，等于其对应的两个李代数乘其中一个乘以一个雅可比矩阵，再加上另一个对应的李代数。（具体看左乘和右乘）。</li>
<li>旋转矩阵和变换矩阵就是李群，每一个矩阵都对应着一个李代数，李代数是一个向量。特别地对于一个旋转矩阵对应的李代数是一个旋转向量。</li>
<li>李代数可以描述李群的局部性质。</li>
<li>李群和李代数之间由指数映射和对数映射来转换。如旋转向量所对应的反对称矩阵的指数函数就是一个旋转矩阵，而旋转矩阵求对数再变化成向量（这里旋转矩阵求对数之后还是一个矩阵，要根据反对称矩阵的关系变换一下），就是一个旋转向量。</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SLAM/" rel="tag"># SLAM</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/13/%E3%80%90%E8%A7%86%E8%A7%89SLAM4%E3%80%91Eigen%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="prev" title="【视觉SLAM4】Eigen库的使用">
      <i class="fa fa-chevron-left"></i> 【视觉SLAM4】Eigen库的使用
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/07/19/%E3%80%90%E8%A7%86%E8%A7%89SLAM6%E3%80%91Sophus%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="next" title="【视觉SLAM6】Sophus库的使用">
      【视觉SLAM6】Sophus库的使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#I-%E6%9D%8E%E7%BE%A4%E5%92%8C%E6%9D%8E%E4%BB%A3%E6%95%B0%E5%9F%BA%E7%A1%80"><span class="nav-text">I. 李群和李代数基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BE%A4%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-text">1. 群的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%9D%8E%E4%BB%A3%E6%95%B0%E7%9A%84%E5%BC%95%E5%87%BA"><span class="nav-text">2. 李代数的引出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9D%8E%E4%BB%A3%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-text">3. 李代数的定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%9D%8E%E4%BB%A3%E6%95%B0-mathfrak-so-3"><span class="nav-text">(1)李代数 $\mathfrak{so(3)}$</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%9D%8E%E4%BB%A3%E6%95%B0-mathfrak-se-3"><span class="nav-text">(2) 李代数 $\mathfrak{se(3)}$</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#II-%E6%8C%87%E6%95%B0%E6%98%A0%E5%B0%84%E5%92%8C%E5%AF%B9%E6%95%B0%E6%98%A0%E5%B0%84"><span class="nav-text">II. 指数映射和对数映射</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-SO-3-%E4%B8%8A%E7%9A%84%E6%8C%87%E6%95%B0%E6%98%A0%E5%B0%84%E5%92%8C%E5%AF%B9%E6%95%B0%E6%98%A0%E5%B0%84"><span class="nav-text">1. $SO(3)$ 上的指数映射和对数映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%8C%87%E6%95%B0%E6%98%A0%E5%B0%84"><span class="nav-text">(1) 指数映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AF%B9%E6%95%B0%E6%98%A0%E5%B0%84"><span class="nav-text">(2) 对数映射</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-SE-3-%E4%B8%8A%E7%9A%84%E6%8C%87%E6%95%B0%E6%98%A0%E5%B0%84%E5%92%8C%E5%AF%B9%E6%95%B0%E6%98%A0%E5%B0%84"><span class="nav-text">2. $SE(3)$ 上的指数映射和对数映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%8C%87%E6%95%B0%E6%98%A0%E5%B0%84-1"><span class="nav-text">(1) 指数映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AF%B9%E6%95%B0%E6%98%A0%E5%B0%84-1"><span class="nav-text">(2) 对数映射</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#III-%E6%9D%8E%E4%BB%A3%E6%95%B0%E6%B1%82%E5%AF%BC%E4%B8%8E%E6%89%B0%E5%8A%A8%E6%A8%A1%E5%9E%8B"><span class="nav-text">III. 李代数求导与扰动模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-BCH%E5%85%AC%E5%BC%8F%E4%B8%8E%E8%BF%91%E4%BC%BC%E5%BD%A2%E5%BC%8F"><span class="nav-text">1. BCH公式与近似形式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-SO-3-%E4%B8%8A%E7%9A%84%E6%9D%8E%E4%BB%A3%E6%95%B0%E6%B1%82%E5%AF%BC"><span class="nav-text">2. $SO(3)$ 上的李代数求导</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%9D%8E%E4%BB%A3%E6%95%B0%E6%B1%82%E5%AF%BC"><span class="nav-text">(1) 李代数求导</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%89%B0%E5%8A%A8%E6%A8%A1%E5%9E%8B%EF%BC%88%E5%B7%A6%E4%B9%98%EF%BC%89"><span class="nav-text">(2) 扰动模型（左乘）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SE-3-%E4%B8%8A%E7%9A%84%E6%9D%8E%E4%BB%A3%E6%95%B0%E6%B1%82%E5%AF%BC"><span class="nav-text">3. $SE(3)$ 上的李代数求导</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IV-%E6%80%BB%E7%BB%93"><span class="nav-text">IV. 总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="PiggyHero"
      src="/images/cutexiaoxin.gif">
  <p class="site-author-name" itemprop="name">PiggyHero</p>
  <div class="site-description" itemprop="description">不学习咋整啊！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/PiggyHero" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;PiggyHero" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:a363158526@gmail.com" title="E-Mail → mailto:a363158526@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PiggyHero</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>-->


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
